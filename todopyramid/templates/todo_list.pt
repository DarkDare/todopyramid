<metal:master use-macro="view.global_template">
  <div metal:fill-slot="content">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Task</th>
          <th>Tags</th>
          <th>Due</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr tal:repeat="item items">
          <td>${item.task}</td>
          <td>
            <a class="label label-info"
               href="${request.application_url}/tags/${tag.name}"
               tal:repeat="tag sorted(item.tags)"
               tal:content="tag.name">
              Tag name
            </a>
          </td>
          <td>
            <span tal:condition="item.due_date"
               tal:attributes="class item.past_due and 'badge badge-important' or 'badge'">
              <tal:moment replace="structure view.pretty_date(item.due_date)" />
            </span>
          </td>
          <td></td>
        </tr>
      </tbody>
    </table>
  </div>
  <!--! Ironically filling the CSS slot here so that the code above for the moment junk works -->
  <metal:js fill-slot="css">
    <script src="${request.static_url('todopyramid:static/moment.min.js')}"></script>
  </metal:js>
</metal:master>
